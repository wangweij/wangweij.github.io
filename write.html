<html>
<head>
	<meta charset="UTF-8">
	<style>
.huge {
    font-size: 80pt;
    height: 120px;
    margin: 0px;
    text-align: center;
}
.wide {
    font-size: 15vw;
    text-align: center;
}
body {
	margin: 0pt;
}
select {
	width: 100%;
	font-size: 5vw;
}
canvas {
	border:2px solid;
	display:block;
    margin-left: auto;
    margin-right: auto;
}
img {
	width: 120px;
	height: 120px;
	border: 1px;
	vertical-align: middle;
	margin-bottom: 20px;
}
</style>
</head>
<body onload="initCanvas()">
	<div style="text-align: center;">

<select onchange=chooseText()>
<option value="">请选择一篇课文</option>
<option value="0000">🤔🤔🤔🤔</option>
<option value="">一年级下册</option>
<option value="春天的春 冬天的冬 刮风的风 下雪的雪 开花的花 飞机的飞 进入的入">1. 4 Seasons</option>
<option value="姓氏的姓 什么的什 什么的么 一双鞋的双 国家的国 国王的王 正方形的方">2. Lastname歌</option>
<option value="青蛙的青 清澈的清 空气的气 晴天的晴 心情的情 请教的请 出生的生">3. 小frog</option>
<option value="写字的字 左边的左 右边的右 红色的红 时间的时 动作的动 一万的万">4. 猜zi谜</option>
<option value="吃饭的吃 喊叫的叫 主人的主 长江的江 住宅的住 没有的没 以为的以">5. 吃水不忘挖井人</option>
<option value="开会的会 走路的走 北京的北 北京的京 大门的门 广阔的广">6. 我多想去看看</option>
<option value="过路的过 各种的各 各种的种 这样的样 伙伴的伙 伙伴的伴 这个的这">7. 一个接一个</option>
<option value="太阳的太 太阳的阳 学校的校 金色的金 秋天的秋 因为的因 因为的为">8. 四个sun</option>
<option value="男的他的他 大地的地 河水的河 说话的说 也是的也 听见的听 哥哥的哥">9. 小公鸡和小鸭子</option>
<option value="单双数的单 居住的居 打招呼的招 打招呼的呼 快乐的快 快乐的乐">10. 树和喜鹊</option>
<option value="玩具的玩 很好吃的很 应当的当 音乐的音 讲话的讲 行动的行 许多的许">11. 怎么都快乐</option>
<option value="思念的思 睡觉的床的床 前面的前 发光的光 高低的低 故乡的故 故乡的乡">12. 静夜miss</option>
<option value="颜色的色 外面的外 看见的看 爸爸的爸 晚上的晚 哈哈笑的笑 再来一次的再">13. Night Color</option>
<option value="端午的午 过节的节 树叶的叶 大米的米 真好吃的真 分开的分 豆子的豆">14. 端wu粽</option>
<option value="那里的那 走着走着的着 到达的到 高兴的高 高兴的兴 一千的千 成功的成">15. 彩虹</option>
<option value="中间的间 捉迷藏的迷 制造的造 运输的运 水池的池 欢乐的欢 蜘蛛网的网">16. 动物儿歌</option>
<option value="古代的古 凉快的凉 粗细的细 夕阳的夕 李子的李 语言的语 香喷喷的香">17. old对今</option>
<option value="打球的打 拍球的拍 跑步的跑 足球的足 声音的声 身体的身 身体的体">18. 操场上</option>
<option value="人之初的之 性相近的相 性相近的近 学习的习 远方的远 宝玉的玉 正义的义">19. 人's初</option>
<option value="一首诗的首 采花的采 有无的无 大树的树 热爱的爱 尖锐的尖 头上长角的角">20. 2古诗</option>
<option value="闪亮的亮 飞机的机 舞台的台 放声歌唱的放 金鱼的鱼 花朵的朵 美丽的美">21. 荷叶圆圆</option>
<option value="直线的直 啊呀呀的呀 路边的边 事呢的呢 你好吗的吗 好吧的吧 加法的加">22. 要下雨了</option>
<option value="文具的文 一次两次的次 找不到的找 平平安安的平 办法的办 让路的让 书包的包">23. stationary的家</option>
<option value="分钟的钟 丁零零的丁 一元钱的元 公共汽车的共 已经的已 已经的经 坐下来的坐">24. 一minute</option>
<option value="要吃饭的要 连续的连 一百的百 还要多还 舌头的舌 点头的点">25. 动物王国开大会</option>
<option value="一块的块 非常的非 非常的常 往前走的往 西瓜的瓜 进去的进 天空的空">26. 小猴子下山</option>
<option value="生病的病 医生的医 别人的别 干净的干 奇怪的奇 五六七的七 星星的星">27. 棉花姑娘</option>
<option value="吓坏了的吓 害怕的怕 跟着跑的跟 回家的家 绵羊的羊 大象的象 都笑了的都">28. 咕咚</option>
<option value="捉虫子的捉 一条尾巴的条 爬来爬去的爬 姐姐的姐 您好的您 吃草的草 房子的房">29. 小壁虎借尾巴</option>
<option value="">二年级上册</option>
<option value="两个的两 哪里的哪 宽阔的宽 山顶的顶 眼睛的眼 眼镜的睛 肚皮的肚 肚皮的皮 孩子的孩 跳跃的跳">1. 小蝌蚪找妈妈</option>
<option value="变化的变 南极北极的极 肉片的片 傍晚的傍 海洋的海 海洋的洋 作文的作 坏蛋的坏 给我的给 皮带的带">2. 我是什么</option>
<option value="方法的法 如果的如 脚丫子的脚 动物它的它 娃娃的娃 女孩她的她 毛发的毛 更好吃的更 知识的知 知识的识">3. 植物妈妈有solution</option>
<option value="管理处的处 公园的园 桥梁的桥 一群人的群 排队的队 国旗的旗 金银铜铁的铜 号召的号 红领巾的领 红领巾的巾">4. 场景歌</option>
<option value="杨树的杨 强壮的壮 梧桐树的桐 枫叶的枫 松鼠的松 柏树的柏 棉花的棉 杉树的杉 变化的化 桂花的桂">5. 树之歌</option>
<option value="唱歌的歌 写字的写 树丛的丛 深色的深 一二三四五六的六 大熊猫的熊 大熊猫的猫 八九十的九 朋友的朋 朋友的友">6. 拍手song</option>
<option value="四季的季 吹牛的吹 肥胖的肥 农民的农 事情的事 忙忙碌碌的忙 早出晚归的归 戴帽子的戴 辛苦的辛 辛苦的苦">7. 田家四season歌</option>
<option value="称重量的称 柱子的柱 底下的底 杆秤的杆 杆秤的秤 做事情的做 岁数的岁 站立的站 帆船的船 然后的然">8. 曹冲weighs象</option>
<option value="画画的画 一幅画的幅 评判的评 奖励的奖 报纸的纸 报纸的报 另外的另 及时的及 拿来的拿 合并的并">9. 玲玲的picture</option>
<option value="一封信的封 一封信的信 今天的今 一支笔的支 圆珠笔的圆 圆珠笔的珠 圆珠笔的笔 灯泡的灯 电影的电 电影的影">10. a mail</option>
<option value="哄睡了的哄 先后的先 闭眼睛的闭 洗脸的脸 沉没的沉 头发的发 窗户的窗">11. 妈妈睡了</option>
<option value="楼房的楼 依靠的依 尽头的尽 黄色的黄 一层楼的层 照相的照 火炉的炉 冒烟的烟 挂起来的挂">12. 古诗二首</option>
<option value="南方的南 偏旁部首的部 一些的些 巨大的巨 位置的位 每个人的每 升起来的升 闪电的闪 汪汪叫的狗">13. 黄山奇石</option>
<option value="台湾的湾 有名的名 胜利的胜 痕迹的迹 正中央的央 美丽的丽 展开的展 现在的现 披着衣服的披">14. 日月潭</option>
<option value="一份的份 山坡的坡 树枝的枝 起来的起 客人的客 老师的老 收到的收 城市的城 城市的市 胜利的利">15. 葡萄沟</option>
<option value="水井的井 观看的观 沿着河边走路的沿 回答的答 口渴的渴 喝水的喝 说话的话 边际的际">16. 坐well观天</option>
<option value="前面的面 一阵风的阵 晴朗的朗 枯萎的枯 却是的却 将来的将 缤纷的纷 夜晚的夜">17. 寒号鸟</option>
<option value="一棵树的棵 谢谢的谢 想念的想 盯着看的盯 言语的言 邻居的邻 治理的治 妖怪的怪">18. 我要的是葫芦</option>
<option value="洪水的洪 灾难的灾 困难的难 道路的道 过年的年 认识的认 被子的被 事业的业 生产的产">19. 大禹治水</option>
<option value="扁担的扁 扁担的担 志气的志 队伍的伍 老师的师 军队的军 战士的战 战士的士">20. 朱德的biandan</option>
<option value="忘记的忘 泼水的泼 温度的度 龙王的龙 大炮的炮 穿衣服的穿 方向的向 命令的令">21. 难forget的pour水节</option>
<option value="危险的危 勇敢的敢 惊讶的惊 阴天的阴 好似的似 田野的野 苍茫的苍 苍茫的茫">22. 古诗二首</option>
<option value="于是的于 评论的论 河岸的岸 屋子的屋 切菜的切 长久的久 散步的散 散步的步">23. 雾在哪里</option>
<option value="唱歌的唱 赶快的赶 兴旺的旺 旁边的旁 浑浊的浑 问候的候 你是谁的谁 轻快的轻 汽车的汽">24. 雪孩子</option>
<option value="食物的食 食物的物 爷爷的爷 就要得就 爪子的爪 神话的神 神化的活 肥猪的猪">25. 狐假虎威</option>
<option value="折断的折 一张纸的张 祝福的祝 扎起来的扎 抓住的抓 但是的但 哭泣的哭">27. paper船和风筝</option>
<option value="汽车的车 得到的得 秧苗的秧 秧苗的苗 出汗的汗 场地的场 受伤的伤 马路的路">28. 风娃娃</option>
<option value="">二年级下册</option>
<option value="诗歌的诗 农村的村 儿童的童 碧绿的碧 化妆的妆 绿色的绿 丝绸的丝 剪刀的剪">1. 古poem二首</option>
<option value="往前冲的冲 寻找的寻 姑娘的姑 姑娘的娘 吐泡泡的吐 柳树的柳 摇摇荡荡的荡 猕猴桃的桃 杏树的杏">2. 找春天</option>
<option value="鲜花的鲜 邮递员的邮 邮递员的递 邮递员的员 平原的原 叔叔的叔 警察局的局 一堆土的堆 礼貌的礼">3. 开满flower的小路</option>
<option value="邓小平的邓 植树的植 方格的格 引号的引 注意的注 装满了水的满 休息的休 休息的息">4. 邓小平爷爷植树</option>
<option value="锋利的锋 昨天的昨 感冒的冒 留下来的留 弯弯曲曲的弯 后背的背 洒水的洒 温暖的温 温暖的暖">5. 雷锋叔叔，你在哪里</option>
<option value="我能飞的能 书桌的桌 味道的味 买东西的买 文具的具 甘蔗的甘 甜丝丝的甜 白菜的菜 劳动的劳">6. 千人糕</option>
<option value="一匹马的匹 妹妹的妹 波浪的波 花纹的纹 好像的像 风景的景 恋恋不舍的恋 恋恋不舍的舍 求求你了的求">7. A出色的马</option>
<option value="神州遥的州 台湾的湾 岛屿的岛 海峡的峡 人民的民 民族的族 友谊的谊 整齐的齐 勤奋的奋">1. 神zhou遥</option>
<option value="贴纸的贴 大街的街 赛龙舟的舟 艾草的艾 尊敬的敬 转圈的转 团圆的团 热闹的热 热闹的闹">2. 传统节日</option>
<option value="贝壳的贝 贝壳的壳 甲骨文的甲 甲骨文的骨 一块钱的钱 硬币的币 我与你的与 财宝的财 关门的关">3. “bei”的故事</option>
<option value="火烧的烧 茄子的茄 烤鸭的烤 烤鸭的鸭 吃肉的肉 鸡蛋的鸡 鸡蛋的蛋 炒米饭的炒 炒米饭的饭">4. 中国美食</option>
<option value="彩色的彩 做梦的梦 森林的森 拉手的拉 结果的结 苹果的苹 一般般的般 精灵的精 精灵的灵">8. Colouful Dreams</option>
<option value="雨伞的伞 阿姨的姨 弟弟的弟 随便的便 教书的教 游戏的游 游戏的戏 母亲的母">9. 枫树上的喜鹊</option>
<option value="周围的周 周围的围 一句话的句 补充的补 补充的充 吃药的药 齐心合力的合 死了的死 记住的记">10. 沙滩上的童话</option>
<option value="放屁的屁 屁股的股 尿尿的尿 干净的净 拉屎的屎 幸福的幸 使劲的使 使劲的劲">11. 我是一只小虫子</option>
<option value="逃亡的亡 牢房的牢 钻洞的钻 劝告的劝 丢失的丢 告诉的告 筋疲力尽的筋 筋疲力尽的疲">12. 寓言二则</option>
<option value="图画的图 上课的课 摇摇摆摆的摆 座位的座 交给的交 哈哈大笑的哈 一页纸的页 抢东西的抢 嘻嘻笑的嘻">13. 画杨桃</option>
<option value="愿意的愿 愿意的意 小麦的麦 应该的该 伯父的伯 时刻的刻 突然的突 掉下来的掉">14. 小马过河</option>
<option value="湖水的湖 莲花的莲 穷人的穷 荷花的荷 绝对的绝 包含的含 山岭的岭 吴国的吴">15. 古诗二首</option>
<option value="打雷的雷 乌云的乌 黑色的黑 压迫的压 垂下来的垂 户外运动的户 迎接的迎 扑面而来的扑">16. Thunderstorm</option>
<option value="指南针的指 指南针的针 帮助的帮 帮主的助 导游的导 永远的永 碰撞的碰 特殊的特 堆积的积">17. 要是你在野外迷了路</option>
<option value="宇宙的宇 宇宙的宙 茶杯的杯 丢失的失 木板的板 容易的容 容易的易 浴缸的浴 教室的室">18. 太空生活趣事多</option>
<option value="风扇的扇 慢悠悠的慢 遇见的遇 兔子的兔 平安的安 树根的根 疼痛的痛 最大的最">19. 大象的耳朵</option>
<option value="商店的店 决定的决 决定的定 商店的商 农夫的夫 终于的终 吃完了的完 交换的换 学期的期">20. 蜘蛛开店</option>
<option value="青蛙的蛙 做买卖的卖 搬家的搬 摔倒的倒 菜籽油的籽 温泉的泉 破洞的破 应该的应">21. Frog Sells 泥塘</option>
<option value="整齐的整 抽水的抽 纺织的纺 纺织的织 编花篮的编 怎样的怎 布谷鸟的布 消防车的消">22. 小毛虫</option>
<option value="祖先的祖 啊呜一口的啊 浓稠的浓 看望的望 蓝色的蓝 摘花的摘 掏出来的掏 比赛的赛 回忆的忆">23. Ancester的Cradle</option>
<option value="世界的世 世界的界 功夫的功 反过来的反 重复的复 公式的式 简单的简 弄出来的弄 理由的由">24. 当world还小的时候</option>
<option value="感觉的觉 值日的值 分类的类 艰苦的艰 弹弓的弓 炎热的炎 害虫的害 如此的此 新年的新">25. 羿射九日</option>
<option value="">三年级上册</option>
<option value="早晨的晨 绒球花的绒 绒球花的球 汉族的汉 鲜艳的艳 服装的服 服装的装 打扮的扮 安静的静 停下来的停 孔雀的孔 孔雀的雀 粗壮的粗">1. 大青树下的小学</option>
<option value="雨落下来的落 荒野的荒 笛子的笛 跳舞的舞 狂欢节的狂 惩罚的罚 放假的假 互相的互 厕所的所 能够的够 猜谜语的猜 飞扬的扬 手臂的臂">2. 花的学校</option>
<option value="寒冷的寒 石径的径 斜坡的斜 霜降的霜 赠送的赠 刘景文的刘 锅盖的盖 菊花的菊 残破的残 君须记的君 橙色的橙 赠送的送 挑水的挑">4. 古诗三首</option>
<option value="铺满的铺 水泥的泥 亮晶晶的晶 院子的院 墙壁的墙 印象的印 排列的排 排列的列 规则的规 规则的则 凌乱的乱 棕色的棕 迟到的迟">5. pu满金色巴掌的水ni道</option>
<option value="纸盒的盒 颜料的颜 颜料的料 邮票的票 争取的争 花仙子的仙 好闻的闻 勾住的勾 加紧的紧 山洞的洞 绿油油的油 歌曲的曲 丰收的丰">6. 秋天的雨</option>
<option value="火柴的柴 旧围裙的旧 围裙的裙 可怜的怜 肚子饿的饿 火焰的焰 蜡烛的蜡 蜡烛的烛 伸手的伸 忽然的忽 地板的板 丰富的富 一颗星星的颗">8. 卖火chai的小女孩</option>
<option value="旅行的旅 咱们的咱 小偷的偷 救命的救 救命的命 拼命的拼 打扫的扫 胃肠的胃 管用的管 湿乎乎的乎 流泪的流 流泪的泪 计算的算">10. 在牛肚子里lv行</option>
<option value="准备的准 准备的备 等一会儿的等 暴风雨的暴 睡觉的觉 墙壁的壁 砍树的砍 蜘蛛的蜘 蜘蛛的蛛 漂亮的漂 撞墙的撞 吃饱的饱 晒太阳的晒">12. 总也倒不了的老屋</option>
<option value="搭船的搭 母亲的亲 父亲的父 沙拉拉的沙 沙啦啦的啦 响声的响 羽毛的羽 翠绿的翠 嘴巴的嘴 静悄悄的悄 吞咽的吞 你好哦的哦 捕鱼的捕">15. da船的鸟</option>
<option value="蒲公英的蒲 蒲公英的英 盛开的盛 玩耍的耍 喊叫的喊 打哈欠的欠 钓鱼的钓 然而的而 察看的察 合拢的拢 有趣的趣 喜爱的喜">16. 金色的草地</option>
<option value="中断的断 楚讲的楚 至此回的至 孤帆的孤 帆船的帆 饮料的饮 初中的初 镜子的镜 未来的未 磨面的磨 遥远的遥 银色的银 盘子的盘">17. 古诗三首</option>
<option value="优秀的优 淡蓝的淡 深浅的浅 错误的错 岩石的岩 龙虾的虾 挺好的挺 鱼刺的刺 敲鼓的鼓 数学的数 厚薄的厚 宝贵的宝 宝贵的贵">18. 富饶的西沙群岛</option>
<option value="海滨的滨 灰色的灰 飘扬的飘 捕鱼的渔 一遍的遍 躺下的躺 满载的载 依靠的靠 亚洲的亚 夏天的夏 除法的除 脚踩的踩 整洁的洁">19. 海bin小城</option>
<option value="脑袋的脑 脑袋的袋 严严实实的严 严严实实的实 挡住的挡 视线的视 视线的线 花坛的坛 明显的显 木材的材 软绵绵的软 刮风的刮 库房的库">20. 美丽的小兴安岭</option>
<option value="美妙的妙 演奏的演 演奏的奏 钢琴的琴 感受的感 感受的受 激动的激 打击的击 乐器的器 水滴的滴 敲鼓的敲 鸣叫的鸣 告诉的诉">21. 大自然的声音</option>
<option value="读书的读 麻雀的麻 勇敢的勇 蚂蚁的蚂 蚂蚁的蚁 短裤的短 栽树的栽 凤梨的梨 一寸的寸 柔软的柔 摇摆的摇 一册书的册">22. du不完的大书</option>
<option value="朝着的朝 雾蒙蒙的雾 雾蒙蒙的蒙 鼻子的鼻 总是的总 抖动的抖 露水的露 湿呼呼的湿 呼吸的吸 打猎的猎 翅膀的翅 翅膀的膀 沉重的重">23. 父亲树林和鸟</option>
<option value="司马光的司 庭院的庭 登山的登 跌倒的跌 大众的众 放弃的弃 手持的持">24. si马光</option>
<option value="掌声的掌 班级的班 默默的默 离开的离 腿脚的腿 车轮的轮 投球的投 刚才的刚 曲调的调 摇晃的摇 摇晃的晃 热烈的烈 勇敢的勇">25. zhang声</option>
<option value="郊外的郊 养病的养 粉红的粉 谷粒的谷 谷粒的粒 男孩的男 活着的或 或者的者 冰冻的冻 寒冷的冷 可惜的惜 肯定的肯 诚实的诚">26. 灰雀</option>
</select>
<br>
	<div>
<span class=wide onclick=sayOne(-2)>⏮️</span>
<span class=wide onclick=sayOne(0)>🔁</span>
<span id=previous class=wide onclick=sayOne(-1)>◀️</span>
<span id=next class=wide onclick=sayOne(1)>▶️</span>
<span id=one class=wide onclick=showOne()>🤔</span>
<span class=wide onclick=showAll()>✅</span>
</div>
<canvas id="can"></canvas>
</div>
<div id=all style=display:block></div>
<div id=unknown style=display:none class=huge><hr/></div>
<script>
// scp ~/work/tmp/write.html cr.openjdk.java.net:9999999/webrev.00/

var synth = window.speechSynthesis;
var chinese;
findChinese(synth);
window.onresize = initCanvas;

function findChinese(s) {
  	const voices = synth.getVoices()
	for(i = 0; i < voices.length ; i++) {
		if (voices[i].lang == "zh-CN") {
			chinese = voices[i];
			return;
		}
		if (voices[i].lang == "zh-TW") {
			chinese = voices[i];
		}
	}	
}

function say(words) {
	var utterThis = new SpeechSynthesisUtterance(words);
	utterThis.voice = chinese;
	// utterThis.pitch = pitch.value;
	// utterThis.rate = rate.value;
	synth.speak(utterThis);
}

var dontknow = "";
var items;
var count;
var pos;

var canvas, ctx, flag = false,
    prevX = 0,
    currX = 0,
    prevY = 0,
    currY = 0,
    dot_flag = false;
var drawn = false;


function chooseText() {
	loadText(event.target.value);
}

function draw() {
    ctx.beginPath();
    ctx.moveTo(prevX, prevY);
    ctx.lineTo(currX, currY);
    ctx.strokeStyle = "black";
    ctx.lineWidth = 10;
    ctx.stroke();
    ctx.closePath();
    drawn = true;
}

function erase() {
    ctx.clearRect(0, 0, w, h);
}

function save() {
	if (!drawn || pos < 0 || pos >= count) {
		return;
	}
	var name = document.getElementById("img" + pos);
    var dataURL = canvas.toDataURL();
    name.style.border = "2px solid";
    name.src = dataURL;
    name.style.display = "inline";
    drawn = false;
}

function restore(i) {
    var image = document.getElementById("img" + i);
    if (image.src != "") {
    	ctx.drawImage(image, 0, 0);
    }
}

function findxy(res, e) {
    if (res == 'down') {
    	document.getElementById("one").innerHTML = "🤔";
        prevX = currX;
        prevY = currY;
        currX = e.pageX - canvas.offsetLeft;
        currY = e.pageY - canvas.offsetTop;

        flag = true;
        dot_flag = true;
        e.preventDefault();
        if (dot_flag) {
            ctx.beginPath();
            ctx.fillStyle = "black";
            ctx.fillRect(currX, currY, 2, 2);
            ctx.closePath();
            dot_flag = false;
        }
    }
    if (res == 'up' || res == "out") {
        flag = false;
    }
    if (res == 'move') {
        if (flag) {
            prevX = currX;
            prevY = currY;
            currX = e.pageX - canvas.offsetLeft;
            currY = e.pageY - canvas.offsetTop;
            draw();
        }
    }
}

function loadText(all) {
	if (all == "") {
		return;
	}
	if (all == "0000") {
		all = dontknow;
	}
	items = all.split(" ");
	count = items.length;
	var content = "";
	for (i = 0; i < count; i++) {
		content += "<span class=huge>" + items[i].substring(items[i].length - 1);
		content += " <img id=img" + i + "></img></span><br>\n";
	}
	pos = -1;
	document.getElementById("all").innerHTML = content;
	document.getElementById("all").style.display = "none";
	document.getElementById("unknown").style.display = "none";
	document.getElementById("next").innerHTML = "▶️";
	checkGray();
	erase();
	say("换一篇课文");
}

function initCanvas() {
    canvas = document.getElementById('can');
    ctx = canvas.getContext("2d");
    var sizex = window.innerWidth - 20;
    var sizey = window.innerHeight - canvas.offsetTop - 10;
    if (sizex > sizey) sizex = sizey;
    w = h = canvas.height = canvas.width = sizex;

    canvas.addEventListener("touchmove", function (e) { findxy('move', e) }, false);
    canvas.addEventListener("touchstart", function (e) { findxy('down', e) }, false);
    canvas.addEventListener("touchcancel", function (e) { findxy('up', e) }, false);
    canvas.addEventListener("touchout", function (e) { findxy('out', e) }, false);

    canvas.addEventListener("mousemove", function (e) { findxy('move', e) }, false);
    canvas.addEventListener("mousedown", function (e) { findxy('down', e) }, false);
    canvas.addEventListener("mouseup", function (e) { findxy('up', e) }, false);
    canvas.addEventListener("mouseout", function (e) { findxy('out', e) }, false);
}

function r(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min)) + min;
}

function checkGray() {
	if (pos <= 0) {
		document.getElementById("previous").style.opacity = "0.4";
	} else {
		document.getElementById("previous").style.opacity = "1";
	}
	if (pos == count - 1) {
		document.getElementById("next").style.opacity = "0.4";
	} else {
		document.getElementById("next").style.opacity = "1";
	}
}

function sayOne(i) {
	if (i != 0) save();
	erase();
	if (i == -2) pos = 0;
	else if (i == -1) --pos;
	else if (i == 0) pos = pos;
	else ++pos;
	if (pos < 0) pos = 0;
	if (pos >= count) pos = count - 1;
	checkGray();
	document.getElementById("one").innerHTML = "🤔";
	document.getElementById("all").style.display = "none";
	document.getElementById("unknown").style.display = "none";
	if (i != 0) restore(pos);
	say(items[pos]);
}

function showOne() {
	say("我来看看");
	var now = document.getElementById("unknown").innerHTML;
	var here = items[pos].substring(items[pos].length - 1);
	document.getElementById("one").innerHTML = here;
	if (!now.includes(here)) {
		if (dontknow == undefined || dontknow == "") dontknow = items[pos];
		else dontknow += " " + items[pos];
		document.getElementById("unknown").innerHTML += here;
	}
}

function showAll() {
	say("检查答案");
	save();
	document.getElementById("one").innerHTML = "🤔";
	document.getElementById("all").style.display = "block";
	document.getElementById("unknown").style.display = "block";
}
</script>
</body>
</html>
